{"version":3,"file":"vue-upload-component.part.js","sources":["../src/InputFile.vue","../src/FileUpload.vue","../src/index.js"],"sourcesContent":["<template>\r\n  <input\r\n    type=\"file\"\r\n    :name=\"$parent.name\"\r\n    :id=\"$parent.inputId || $parent.name\"\r\n    :accept=\"$parent.accept\"\r\n    @change=\"change\"\r\n    :webkitdirectory=\"$parent.directory && $parent.features.directory\"\r\n    :directory=\"$parent.directory && $parent.features.directory\"\r\n    :multiple=\"$parent.multiple && $parent.features.html5\"\r\n  />\r\n</template>\r\n<script>\r\nexport default {\r\n  methods: {\r\n    change(e) {\r\n      this.$destroy()\r\n      this.$parent.addInputFile(e.target)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","<template>\r\n  <label :class=\"className\">\r\n    <slot></slot>\r\n    <input-file></input-file>\r\n  </label>\r\n</template>\r\n<script>\r\nimport InputFile from './InputFile.vue'\r\n\r\nexport default {\r\n  name: 'file-upload',\r\n\r\n  components: {\r\n    InputFile,\r\n  },\r\n\r\n  props: {\r\n    inputId: {\r\n      type: String,\r\n    },\r\n\r\n    name: {\r\n      type: String,\r\n      default: 'file',\r\n    },\r\n\r\n    accept: {\r\n      type: String,\r\n    },\r\n\r\n    multiple: {\r\n      type: Boolean,\r\n    },\r\n\r\n    maximum: {\r\n      type: Number,\r\n      default() {\r\n        return this.multiple ? 0 : 1\r\n      }\r\n    },\r\n\r\n    addIndex: {\r\n      type: [Boolean, Number],\r\n    },\r\n\r\n    directory: {\r\n      type: Boolean,\r\n    },\r\n\r\n    postAction: {\r\n      type: String,\r\n    },\r\n\r\n    headers: {\r\n      type: Object,\r\n      default: Object,\r\n    },\r\n\r\n    data: {\r\n      type: Object,\r\n      default: Object,\r\n    },\r\n\r\n    timeout: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n\r\n\r\n    drop: {\r\n      default: false,\r\n    },\r\n\r\n    dropDirectory: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n\r\n    size: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n\r\n    extensions: {\r\n      default: Array,\r\n    },\r\n\r\n    value: {\r\n      type: Array,\r\n      default: Array,\r\n    },\r\n\r\n    thread: {\r\n      type: Number,\r\n      default: 1,\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      files: this.value,\r\n      features: {\r\n        html5: true,\r\n        directory: false,\r\n        drag: false,\r\n      },\r\n\r\n      active: false,\r\n      dropActive: false,\r\n\r\n      uploading: 0,\r\n\r\n      destroy: false,\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    let input = document.createElement('input')\r\n    input.type = 'file'\r\n    input.multiple = true\r\n\r\n    // html5\r\n    if (window.FormData && input.files) {\r\n      if (typeof input.webkitdirectory === 'boolean' || typeof input.directory === 'boolean') {\r\n        this.features.directory = true\r\n      }\r\n\r\n      if (this.features.html5 && typeof input.ondrop !== 'undefined') {\r\n        this.features.drop = true\r\n      }\r\n    } else {\r\n      this.features.html5 = false\r\n    }\r\n\r\n    // files\r\n    this.maps = {}\r\n\r\n    this.$nextTick(function () {\r\n      if (this.$parent) {\r\n        this.$parent.$forceUpdate()\r\n      }\r\n\r\n      this.watchDrop(this.drop)\r\n    })\r\n  },\r\n\r\n  beforeDestroy() {\r\n    this.destroy = true\r\n    this.active = false\r\n  },\r\n\r\n  computed: {\r\n    uploaded() {\r\n      let file\r\n      for (let i = 0; i < this.files.length; i++) {\r\n        file = this.files[i]\r\n        if (file.fileObject && !file.error && !file.success) {\r\n          return false\r\n        }\r\n      }\r\n      return true\r\n    },\r\n\r\n    className() {\r\n      return []\r\n    }\r\n  },\r\n\r\n\r\n  watch: {\r\n    active(active) {\r\n      this.watchActive(active)\r\n    },\r\n\r\n    dropActive() {\r\n      if (this.$parent) {\r\n        this.$parent.$forceUpdate()\r\n      }\r\n    },\r\n\r\n    drop(value) {\r\n      this.watchDrop(value)\r\n    },\r\n\r\n    value(files) {\r\n      if (this.files === files) {\r\n        return\r\n      }\r\n      this.files = files\r\n\r\n      let oldMaps = this.maps\r\n\r\n      // Maps\r\n      this.maps = {}\r\n      for (let i = 0; i < this.files.length; i++) {\r\n        let file = this.files[i]\r\n        this.maps[file.id] = file\r\n      }\r\n\r\n      // add, update\r\n      for (let key in this.maps) {\r\n        let newFile = this.maps[key]\r\n        let oldFile = oldMaps[key]\r\n        if (newFile !== oldFile) {\r\n          this.emitFile(newFile, oldFile)\r\n        }\r\n      }\r\n\r\n      // Delete\r\n      for (let key in oldMaps) {\r\n        if (!this.maps[key]) {\r\n          this.emitFile(undefined, oldMaps[key])\r\n        }\r\n      }\r\n    },\r\n  },\r\n\r\n  methods: {\r\n\r\n    // Clear - Empty the file list\r\n    clear() {\r\n      if (this.files.length) {\r\n        let files = this.files\r\n        this.files = []\r\n\r\n        this.maps = {}\r\n\r\n        this.emitInput()\r\n        for (let i = 0; i < files.length; i++) {\r\n          this.emitFile(undefined, files[i])\r\n        }\r\n      }\r\n      return true\r\n    },\r\n\r\n    // Get - Get file by Id\r\n    get(id) {\r\n      if (!id) {\r\n        return false\r\n      }\r\n\r\n      if (typeof id === 'object') {\r\n        return this.maps[id.id] || false\r\n      }\r\n\r\n      return this.maps[id] || false\r\n    },\r\n\r\n    // Add file - Generate new Id if not provided\r\n    add(_files, index = this.addIndex) {\r\n      let files = _files\r\n      let isArray = files instanceof Array\r\n\r\n      if (!isArray) {\r\n        files = [files]\r\n      }\r\n\r\n      let addFiles = []\r\n      for (let i = 0; i < files.length; i++) {\r\n        let file = files[i]\r\n        if (this.features.html5 && file instanceof Blob) {\r\n          file = {\r\n            file,\r\n            size: file.size,\r\n            name: file.webkitRelativePath || file.relativePath || file.name || 'unknown',\r\n            type: file.type,\r\n          }\r\n        }\r\n        let fileObject = false\r\n        if (file.fileObject === false) {\r\n          // false\r\n        } else if (file.fileObject) {\r\n          fileObject = true\r\n        } else if (typeof Element !== 'undefined' && file.el instanceof Element) {\r\n          fileObject = true\r\n        } else if (typeof Blob !== 'undefined' && file.file instanceof Blob) {\r\n          fileObject = true\r\n        }\r\n        if (fileObject) {\r\n          file = Object.assign({\r\n            fileObject: true,\r\n            size: -1,\r\n            name: 'Filename',\r\n            type: '',\r\n            active: false,\r\n            error: '',\r\n            success: false,\r\n            putAction: this.putAction,\r\n            postAction: this.postAction,\r\n            timeout: this.timeout,\r\n          }, file, {\r\n            response: {},\r\n\r\n            progress: '0.00',\r\n            speed: 0,\r\n          })\r\n\r\n          file.data = Object.assign({}, this.data, file.data ? file.data : {})\r\n\r\n          file.headers = Object.assign({}, this.headers, file.headers ? file.headers : {})\r\n        }\r\n\r\n        if (!file.id) {\r\n          file.id = Math.random().toString(36).substr(2)\r\n        }\r\n\r\n        if (this.emitFilter(file, undefined)) {\r\n          continue\r\n        }\r\n\r\n        if (this.maximum > 1 && (addFiles.length + this.files.length) >= this.maximum) {\r\n          break\r\n        }\r\n\r\n        addFiles.push(file)\r\n\r\n        if (this.maximum === 1) {\r\n          break\r\n        }\r\n      }\r\n\r\n      if (!addFiles.length) {\r\n        return false\r\n      }\r\n\r\n      if (this.maximum === 1) {\r\n        this.clear()\r\n      }\r\n\r\n      let newFiles\r\n      if (index === true || index === 0) {\r\n        newFiles = addFiles.concat(this.files)\r\n      } else if (index) {\r\n        newFiles = addFiles.concat([])\r\n        newFiles.splice(index, 0, addFiles)\r\n      } else {\r\n        newFiles = this.files.concat(addFiles)\r\n      }\r\n\r\n      this.files = newFiles\r\n\r\n      for (let i = 0; i < addFiles.length; i++) {\r\n        let file = addFiles[i]\r\n        this.maps[file.id] = file\r\n      }\r\n\r\n      this.emitInput()\r\n      for (let i = 0; i < addFiles.length; i++) {\r\n        this.emitFile(addFiles[i], undefined)\r\n      }\r\n\r\n      return isArray ? addFiles : addFiles[0]\r\n    },\r\n\r\n    // InputFile - Add the file selected by <input type = \"file\"> to the upload list\r\n    addInputFile(el) {\r\n      let files = []\r\n      if (el.files) {\r\n        for (let i = 0; i < el.files.length; i++) {\r\n          let file = el.files[i]\r\n          files.push({\r\n            size: file.size,\r\n            name: file.webkitRelativePath || file.relativePath || file.name,\r\n            type: file.type,\r\n            file,\r\n            el\r\n          })\r\n        }\r\n      } else {\r\n        files.push({\r\n          name: el.value.replace(/^.*?([^\\/\\\\\\r\\n]+)$/, '$1'),\r\n          el,\r\n        })\r\n      }\r\n      return this.add(files)\r\n    },\r\n\r\n    // DataTransfer - Add files that are dragged or pasted into the upload list\r\n    addDataTransfer(dataTransfer) {\r\n      let files = []\r\n      if (dataTransfer.items && dataTransfer.items.length) {\r\n        let items = []\r\n        for (let i = 0; i < dataTransfer.items.length; i++) {\r\n          let item = dataTransfer.items[i]\r\n          if (item.getAsEntry) {\r\n            item = item.getAsEntry() || item.getAsFile()\r\n          } else if (item.webkitGetAsEntry) {\r\n            item = item.webkitGetAsEntry() || item.getAsFile()\r\n          } else {\r\n            item = item.getAsFile()\r\n          }\r\n          if (item) {\r\n            items.push(item)\r\n          }\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n          let forEach = (i) => {\r\n            let item = items[i]\r\n            if (!item || (this.maximum > 0 && files.length >= this.maximum)) {\r\n              return resolve(this.add(files))\r\n            }\r\n            this.getEntry(item).then(function (results) {\r\n              files.push.apply(files, results)\r\n              forEach(i + 1)\r\n            })\r\n          }\r\n          forEach(0)\r\n        })\r\n      }\r\n\r\n      if (dataTransfer.files.length) {\r\n        for (let i = 0; i < dataTransfer.files.length; i++) {\r\n          files.push(dataTransfer.files[i])\r\n          if (this.maximum > 0 && files.length >= this.maximum) {\r\n            break\r\n          }\r\n        }\r\n        return Promise.resolve(this.add(files))\r\n      }\r\n\r\n      return Promise.resolve([])\r\n    },\r\n\r\n    getEntry(entry, path = '') {\r\n      return new Promise((resolve, reject) => {\r\n        if (entry.isFile) {\r\n          entry.file(function (file) {\r\n            resolve([\r\n              {\r\n                size: file.size,\r\n                name: path + file.name,\r\n                type: file.type,\r\n                file,\r\n              }\r\n            ])\r\n          })\r\n        } else if (entry.isDirectory && this.dropDirectory) {\r\n          let files = []\r\n          let dirReader = entry.createReader()\r\n          let readEntries = () => {\r\n            dirReader.readEntries((entries) => {\r\n              let forEach = (i) => {\r\n                if ((!entries[i] && i === 0) || (this.maximum > 0 && files.length >= this.maximum)) {\r\n                  return resolve(files)\r\n                }\r\n                if (!entries[i]) {\r\n                  return readEntries()\r\n                }\r\n                this.getEntry(entries[i], path + entry.name + '/').then((results) => {\r\n                  files.push.apply(files, results)\r\n                  forEach(i + 1)\r\n                })\r\n              }\r\n              forEach(0)\r\n            })\r\n          }\r\n          readEntries()\r\n        } else {\r\n          resolve([])\r\n        }\r\n      })\r\n    },\r\n\r\n    // Remove a file object\r\n    remove(id) {\r\n      let file = this.get(id)\r\n      if (file) {\r\n        if (this.emitFilter(undefined, file)) {\r\n          return false\r\n        }\r\n        let files = this.files.concat([])\r\n        let index = files.indexOf(file)\r\n        if (index === -1) {\r\n          console.error('remove', file)\r\n          return false\r\n        }\r\n        files.splice(index, 1)\r\n        this.files = files\r\n\r\n        delete this.maps[file.id]\r\n\r\n        this.emitInput()\r\n        this.emitFile(undefined, file)\r\n      }\r\n      return file\r\n    },\r\n\r\n    // Update a file object\r\n    update(id, data) {\r\n      let file = this.get(id)\r\n      if (file) {\r\n        let newFile = Object.assign({}, file, data)\r\n        if (file.fileObject && file.active && !newFile.active && !newFile.error && !newFile.success) {\r\n          newFile.error = 'abort'\r\n        }\r\n\r\n        if (this.emitFilter(newFile, file)) {\r\n          return false\r\n        }\r\n\r\n        let files = this.files.concat([])\r\n        let index = files.indexOf(file)\r\n        if (index === -1) {\r\n          console.error('update', file)\r\n          return false\r\n        }\r\n        files.splice(index, 1, newFile)\r\n        this.files = files\r\n\r\n        delete this.maps[file.id]\r\n        this.maps[newFile.id] = newFile\r\n\r\n        this.emitInput()\r\n        this.emitFile(newFile, file)\r\n        return newFile\r\n      }\r\n      return false\r\n    },\r\n\r\n    emitFilter(newFile, oldFile) {\r\n      let isPrevent = false\r\n      this.$emit('input-filter', newFile, oldFile, function () {\r\n        isPrevent = true\r\n        return isPrevent\r\n      })\r\n      return isPrevent\r\n    },\r\n\r\n    emitFile(newFile, oldFile) {\r\n      this.$emit('input-file', newFile, oldFile)\r\n      if (newFile && newFile.fileObject && newFile.active && (!oldFile || !oldFile.active)) {\r\n        this.uploading++\r\n        this.$nextTick(function () {\r\n          setTimeout(() => {\r\n            this.upload(newFile).then(() => {\r\n              if (newFile && newFile.fileObject) {\r\n                this.update(newFile, {\r\n                  active: false,\r\n                  success: !newFile.error\r\n                })\r\n              }\r\n            }).catch((e) => {\r\n              this.update(newFile, {\r\n                active: false,\r\n                success: false,\r\n                error: e.code || e.error || e.message || e\r\n              })\r\n            })\r\n          }, parseInt(Math.random() * 50 + 50, 10))\r\n        })\r\n      } else if ((!newFile || !newFile.fileObject || !newFile.active) && oldFile && oldFile.fileObject && oldFile.active) {\r\n        this.uploading--\r\n      }\r\n\r\n      if (this.active && (Boolean(newFile) !== Boolean(oldFile) || newFile.active !== oldFile.active)) {\r\n        this.watchActive(true)\r\n      }\r\n    },\r\n\r\n    emitInput() {\r\n      this.$emit('input', this.files)\r\n    },\r\n\r\n\r\n    // Validate then upload file\r\n    upload(id) {\r\n      let file = this.get(id)\r\n\r\n      // Validate file\r\n      if (!file) {\r\n        return Promise.reject('not_exists')\r\n      }\r\n\r\n      // Validate file object data\r\n      if (!file.fileObject) {\r\n        return Promise.reject('file_object')\r\n      }\r\n\r\n      // Reject if there is an error\r\n      if (file.error) {\r\n        return Promise.reject(file.error)\r\n      }\r\n\r\n      // If the file is already downloaded, don't download-it again\r\n      if (file.success) {\r\n        return Promise.resolve(file)\r\n      }\r\n\r\n      // Validate extensions\r\n      let extensions = this.extensions\r\n      if (extensions && (extensions.length || typeof extensions.length === 'undefined')) {\r\n        if (typeof extensions !== 'object' || !(extensions instanceof RegExp)) {\r\n          if (typeof extensions === 'string') {\r\n            extensions = extensions.split(',').map(value => value.trim()).filter(value => value)\r\n          }\r\n          extensions = new RegExp('\\\\.(' + extensions.join('|').replace(/\\./g, '\\\\.') + ')$', 'i')\r\n        }\r\n        if (file.name.search(extensions) === -1) {\r\n          return Promise.reject('extension')\r\n        }\r\n      }\r\n\r\n      // Validate size\r\n      if (this.size > 0 && file.size >= 0 && file.size > this.size) {\r\n        return Promise.reject('size')\r\n      }\r\n\r\n      // Upload with Html5 specs or Html4 if not supported\r\n      if (this.features.html5) {\r\n        return this.uploadHtml5(file)\r\n      }\r\n      return this.uploadHtml4(file)\r\n    },\r\n\r\n    uploadHtml5(file) {\r\n      let form = new window.FormData()\r\n      let value\r\n      for (let key in file.data) {\r\n        value = file.data[key]\r\n        if (value && typeof value === 'object' && typeof value.toString !== 'function') {\r\n          if (value instanceof File) {\r\n            form.append(key, value, value.name)\r\n          } else {\r\n            form.append(key, JSON.stringify(value))\r\n          }\r\n        } else if (value !== null && value !== undefined) {\r\n          form.append(key, value)\r\n        }\r\n      }\r\n      form.append(this.name, file.file, file.file.filename || file.name)\r\n      let xhr = new XMLHttpRequest()\r\n      xhr.open('POST', file.postAction)\r\n      return this.uploadXhr(xhr, file, form)\r\n    },\r\n\r\n    // HTML5 uploadXMLHttpRequest object\r\n    uploadXhr(xhr, _file, body) {\r\n      let file = _file\r\n      let speedTime = 0\r\n      let speedLoaded = 0\r\n\r\n      xhr.upload.onprogress = (e) => {\r\n        file = this.get(file)\r\n        if (!e.lengthComputable || !file || !file.fileObject || !file.active) {\r\n          return\r\n        }\r\n\r\n        let speedTime2 = Math.round(Date.now() / 1000)\r\n        if (speedTime2 === speedTime) {\r\n          return\r\n        }\r\n        speedTime = speedTime2\r\n\r\n        file = this.update(file, {\r\n          progress: (e.loaded / e.total * 100).toFixed(2),\r\n          speed: e.loaded - speedLoaded,\r\n        })\r\n        speedLoaded = e.loaded\r\n      }\r\n\r\n      let interval = setInterval(() => {\r\n        file = this.get(file)\r\n        if (file && file.fileObject && !file.success && !file.error && file.active) {\r\n          return\r\n        }\r\n\r\n        if (interval) {\r\n          clearInterval(interval)\r\n          interval = false\r\n        }\r\n\r\n        try {\r\n          xhr.abort()\r\n          xhr.timeout = 1\r\n        } catch (e) {\r\n        }\r\n      }, 100)\r\n\r\n      return new Promise((resolve, reject) => {\r\n        let complete\r\n        let fn = (e) => {\r\n          if (complete) {\r\n            return\r\n          }\r\n          complete = true\r\n          if (interval) {\r\n            clearInterval(interval)\r\n            interval = false\r\n          }\r\n\r\n          file = this.get(file)\r\n\r\n          if (!file) {\r\n            return reject('not_exists')\r\n          }\r\n\r\n          if (!file.fileObject) {\r\n            return reject('file_object')\r\n          }\r\n\r\n          if (file.error) {\r\n            return reject(file.error)\r\n          }\r\n\r\n          if (!file.active) {\r\n            return reject('abort')\r\n          }\r\n\r\n\r\n          if (file.success) {\r\n            return resolve(file)\r\n          }\r\n\r\n          let data = {}\r\n\r\n          switch (e.type) {\r\n            case 'timeout':\r\n            case 'abort':\r\n              data.error = e.type\r\n              break\r\n            case 'error':\r\n              if (!xhr.status) {\r\n                data.error = 'network'\r\n              } else if (xhr.status >= 500) {\r\n                data.error = 'server'\r\n              } else if (xhr.status >= 400) {\r\n                data.error = 'denied'\r\n              }\r\n              break\r\n            default:\r\n              if (xhr.status >= 500) {\r\n                data.error = 'server'\r\n              } else if (xhr.status >= 400) {\r\n                data.error = 'denied'\r\n              } else {\r\n                data.progress = '100.00'\r\n              }\r\n          }\r\n\r\n          if (xhr.responseText) {\r\n            let contentType = xhr.getResponseHeader('Content-Type')\r\n            if (contentType && contentType.indexOf('/json') !== -1) {\r\n              data.response = JSON.parse(xhr.responseText)\r\n            } else {\r\n              data.response = xhr.responseText\r\n            }\r\n          }\r\n\r\n          file = this.update(file, data)\r\n\r\n          if (file.error) {\r\n            return reject(file.error)\r\n          }\r\n\r\n          return resolve(file)\r\n        }\r\n\r\n        xhr.onload = fn\r\n        xhr.onerror = fn\r\n        xhr.onabort = fn\r\n        xhr.ontimeout = fn\r\n\r\n        if (file.timeout) {\r\n          xhr.timeout = file.timeout\r\n        }\r\n\r\n        // headers\r\n        for (let key in file.headers) {\r\n          xhr.setRequestHeader(key, file.headers[key])\r\n        }\r\n\r\n        file = this.update(file, { xhr })\r\n\r\n        xhr.send(body)\r\n      })\r\n    },\r\n\r\n    uploadHtml4(_file) {\r\n      let file = _file\r\n      let onKeydown = function (e) {\r\n        if (e.keyCode === 27) {\r\n          e.preventDefault()\r\n        }\r\n      }\r\n\r\n      let iframe = document.createElement('iframe')\r\n      iframe.id = 'upload-iframe-' + file.id\r\n      iframe.name = 'upload-iframe-' + file.id\r\n      iframe.src = 'about:blank'\r\n      iframe.setAttribute('style', 'width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;')\r\n\r\n\r\n      let form = document.createElement('form')\r\n\r\n      form.action = file.postAction\r\n\r\n      form.name = 'upload-form-' + file.id\r\n\r\n\r\n      form.setAttribute('method', 'POST')\r\n      form.setAttribute('target', 'upload-iframe-' + file.id)\r\n      form.setAttribute('enctype', 'multipart/form-data')\r\n\r\n      let value\r\n      let input\r\n      for (let key in file.data) {\r\n        value = file.data[key]\r\n        if (value && typeof value === 'object' && typeof value.toString !== 'function') {\r\n          value = JSON.stringify(value)\r\n        }\r\n        if (value !== null && value !== undefined) {\r\n          input = document.createElement('input')\r\n          input.type = 'hidden'\r\n          input.name = key\r\n          input.value = value\r\n          form.appendChild(input)\r\n        }\r\n      }\r\n      form.appendChild(file.el)\r\n\r\n      document.body.appendChild(iframe).appendChild(form)\r\n\r\n      let getResponseData = function () {\r\n        let doc\r\n        try {\r\n          if (iframe.contentWindow) {\r\n            doc = iframe.contentWindow.document\r\n          }\r\n        } catch (err) {\r\n        }\r\n        if (!doc) {\r\n          try {\r\n            doc = iframe.contentDocument ? iframe.contentDocument : iframe.document\r\n          } catch (err) {\r\n            doc = iframe.document\r\n          }\r\n        }\r\n        if (doc && doc.body) {\r\n          return doc.body.innerHTML\r\n        }\r\n        return null\r\n      }\r\n\r\n      return new Promise((resolve, reject) => {\r\n        setTimeout(() => {\r\n          file = this.update(file, { iframe })\r\n\r\n          // Validate file\r\n          if (!file) {\r\n            return reject('not_exists')\r\n          }\r\n\r\n          let interval = setInterval(() => {\r\n            file = this.get(file)\r\n            if (file && file.fileObject && !file.success && !file.error && file.active) {\r\n              return\r\n            }\r\n\r\n            if (interval) {\r\n              clearInterval(interval)\r\n              interval = false\r\n            }\r\n\r\n            iframe.onabort({ type: file ? 'abort' : 'not_exists' })\r\n          }, 100)\r\n\r\n\r\n          let complete\r\n          let fn = (e) => {\r\n            if (complete) {\r\n              return\r\n            }\r\n            complete = true\r\n\r\n\r\n            if (interval) {\r\n              clearInterval(interval)\r\n              interval = false\r\n            }\r\n\r\n            document.body.removeEventListener('keydown', onKeydown)\r\n\r\n            file = this.get(file)\r\n\r\n            if (!file) {\r\n              return reject('not_exists')\r\n            }\r\n\r\n            if (!file.fileObject) {\r\n              return reject('file_object')\r\n            }\r\n\r\n            if (file.error) {\r\n              return reject(file.error)\r\n            }\r\n\r\n            if (!file.active) {\r\n              return reject('abort')\r\n            }\r\n\r\n            if (file.success) {\r\n              return resolve(file)\r\n            }\r\n\r\n            let response = getResponseData()\r\n            let data = {}\r\n            switch (e.type) {\r\n              case 'abort':\r\n                data.error = 'abort'\r\n                break\r\n              case 'error':\r\n                if (file.error) {\r\n                  data.error = file.error\r\n                } else if (response === null) {\r\n                  data.error = 'network'\r\n                } else {\r\n                  data.error = 'denied'\r\n                }\r\n                break\r\n              default:\r\n                if (file.error) {\r\n                  data.error = file.error\r\n                } else if (data === null) {\r\n                  data.error = 'network'\r\n                } else {\r\n                  data.progress = '100.00'\r\n                }\r\n            }\r\n\r\n            if (response !== null) {\r\n              if (response && response.substr(0, 1) === '{' && response.substr(response.length - 1, 1) === '}') {\r\n                try {\r\n                  response = JSON.parse(response)\r\n                } catch (err) {\r\n                }\r\n              }\r\n              data.response = response\r\n            }\r\n\r\n            file = this.update(file, data)\r\n\r\n            if (file.error) {\r\n              return reject(file.error)\r\n            }\r\n\r\n            return resolve(file)\r\n          }\r\n\r\n          iframe.onload = fn\r\n          iframe.onerror = fn\r\n          iframe.onabort = fn\r\n\r\n          document.body.addEventListener('keydown', onKeydown)\r\n\r\n          form.submit()\r\n        }, 50)\r\n      }).then(function (res) {\r\n        iframe.parentNode && iframe.parentNode.removeChild(iframe)\r\n        return res\r\n      }).catch(function (res) {\r\n        iframe.parentNode && iframe.parentNode.removeChild(iframe)\r\n        return res\r\n      })\r\n    },\r\n\r\n    watchActive(active) {\r\n      let file\r\n      let index = 0\r\n      while ((file = this.files[index])) {\r\n        index++\r\n        if (!file.fileObject) {\r\n          // Do nothing\r\n        } else if (active && !this.destroy) {\r\n          if (this.uploading >= this.thread || (this.uploading && !this.features.html5)) {\r\n            break\r\n          }\r\n          if (!file.active && !file.error && !file.success) {\r\n            this.update(file, { active: true })\r\n          }\r\n        } else {\r\n          if (file.active) {\r\n            this.update(file, { active: false })\r\n          }\r\n        }\r\n      }\r\n      if (this.uploading === 0) {\r\n        this.active = false\r\n      }\r\n    },\r\n\r\n    watchDrop(_el) {\r\n      let el = _el\r\n      if (!this.features.drop) {\r\n        return\r\n      }\r\n\r\n      if (this.dropElement) {\r\n        try {\r\n          document.removeEventListener('dragenter', this.onDragenter, false)\r\n          document.removeEventListener('dragleave', this.onDragleave, false)\r\n          document.removeEventListener('drop', this.onDocumentDrop, false)\r\n          this.dropElement.removeEventListener('dragover', this.onDragover, false)\r\n          this.dropElement.removeEventListener('drop', this.onDrop, false)\r\n        } catch (e) {\r\n        }\r\n      }\r\n\r\n      if (!el) {\r\n        el = false\r\n      } else if (typeof el === 'string') {\r\n        el = document.querySelector(el) || this.$root.$el.querySelector(el)\r\n      } else if (el === true) {\r\n        el = this.$parent.$el\r\n      }\r\n\r\n      this.dropElement = el\r\n\r\n      if (this.dropElement) {\r\n        document.addEventListener('dragenter', this.onDragenter, false)\r\n        document.addEventListener('dragleave', this.onDragleave, false)\r\n        document.addEventListener('drop', this.onDocumentDrop, false)\r\n        this.dropElement.addEventListener('dragover', this.onDragover, false)\r\n        this.dropElement.addEventListener('drop', this.onDrop, false)\r\n      }\r\n    },\r\n\r\n    onDragenter(e) {\r\n      e.preventDefault()\r\n      if (!this.dropActive) {\r\n        this.dropActive = true\r\n      }\r\n    },\r\n\r\n    onDragleave(e) {\r\n      e.preventDefault()\r\n      if (e.target.nodeName === 'HTML' || (e.screenX === 0 && e.screenY === 0 && !e.fromElement && e.offsetX <= 0)) {\r\n        this.dropActive = false\r\n      }\r\n    },\r\n\r\n    onDragover(e) {\r\n      e.preventDefault()\r\n    },\r\n\r\n    onDocumentDrop() {\r\n      this.dropActive = false\r\n    },\r\n\r\n    onDrop(e) {\r\n      e.preventDefault()\r\n      this.addDataTransfer(e.dataTransfer)\r\n    },\r\n  }\r\n}\r\n</script>\r\n","module.exports = require('./FileUpload.vue')\r\n"],"names":[],"mappings":";;;;;;;;;;;AAaA,gBAAe,CAAC;EACd,OAAO,EAAE;IACP,MAAM,CAAC,CAAC,EAAE;MACR,IAAI,CAAC,QAAQ,GAAE;MACf,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,MAAM,EAAC;KACpC;GACF;CACF;;ACXD,iBAAe,CAAC;EACd,IAAI,EAAE,aAAa;;EAEnB,UAAU,EAAE;IACV,SAAS;GACV;;EAED,KAAK,EAAE;IACL,OAAO,EAAE;MACP,IAAI,EAAE,MAAM;KACb;;IAED,IAAI,EAAE;MACJ,IAAI,EAAE,MAAM;MACZ,OAAO,EAAE,MAAM;KAChB;;IAED,MAAM,EAAE;MACN,IAAI,EAAE,MAAM;KACb;;IAED,QAAQ,EAAE;MACR,IAAI,EAAE,OAAO;KACd;;IAED,OAAO,EAAE;MACP,IAAI,EAAE,MAAM;MACZ,OAAO,GAAG;QACR,OAAO,IAAI,CAAC,QAAQ,GAAG,CAAC,GAAG,CAAC;OAC7B;KACF;;IAED,QAAQ,EAAE;MACR,IAAI,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC;KACxB;;IAED,SAAS,EAAE;MACT,IAAI,EAAE,OAAO;KACd;;IAED,UAAU,EAAE;MACV,IAAI,EAAE,MAAM;KACb;;IAED,OAAO,EAAE;MACP,IAAI,EAAE,MAAM;MACZ,OAAO,EAAE,MAAM;KAChB;;IAED,IAAI,EAAE;MACJ,IAAI,EAAE,MAAM;MACZ,OAAO,EAAE,MAAM;KAChB;;IAED,OAAO,EAAE;MACP,IAAI,EAAE,MAAM;MACZ,OAAO,EAAE,CAAC;KACX;;;IAGD,IAAI,EAAE;MACJ,OAAO,EAAE,KAAK;KACf;;IAED,aAAa,EAAE;MACb,IAAI,EAAE,OAAO;MACb,OAAO,EAAE,IAAI;KACd;;IAED,IAAI,EAAE;MACJ,IAAI,EAAE,MAAM;MACZ,OAAO,EAAE,CAAC;KACX;;IAED,UAAU,EAAE;MACV,OAAO,EAAE,KAAK;KACf;;IAED,KAAK,EAAE;MACL,IAAI,EAAE,KAAK;MACX,OAAO,EAAE,KAAK;KACf;;IAED,MAAM,EAAE;MACN,IAAI,EAAE,MAAM;MACZ,OAAO,EAAE,CAAC;KACX;GACF;;EAED,IAAI,GAAG;IACL,OAAO;MACL,KAAK,EAAE,IAAI,CAAC,KAAK;MACjB,QAAQ,EAAE;QACR,KAAK,EAAE,IAAI;QACX,SAAS,EAAE,KAAK;QAChB,IAAI,EAAE,KAAK;OACZ;;MAED,MAAM,EAAE,KAAK;MACb,UAAU,EAAE,KAAK;;MAEjB,SAAS,EAAE,CAAC;;MAEZ,OAAO,EAAE,KAAK;KACf;GACF;;EAED,OAAO,GAAG;IACR,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,EAAC;IAC3C,KAAK,CAAC,IAAI,GAAG,OAAM;IACnB,KAAK,CAAC,QAAQ,GAAG,KAAI;;;IAGrB,IAAI,MAAM,CAAC,QAAQ,IAAI,KAAK,CAAC,KAAK,EAAE;MAClC,IAAI,OAAO,KAAK,CAAC,eAAe,KAAK,SAAS,IAAI,OAAO,KAAK,CAAC,SAAS,KAAK,SAAS,EAAE;QACtF,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,KAAI;OAC/B;;MAED,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,OAAO,KAAK,CAAC,MAAM,KAAK,WAAW,EAAE;QAC9D,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,KAAI;OAC1B;KACF,MAAM;MACL,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,MAAK;KAC5B;;;IAGD,IAAI,CAAC,IAAI,GAAG,GAAE;;IAEd,IAAI,CAAC,SAAS,CAAC,YAAY;MACzB,IAAI,IAAI,CAAC,OAAO,EAAE;QAChB,IAAI,CAAC,OAAO,CAAC,YAAY,GAAE;OAC5B;;MAED,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,EAAC;KAC1B,EAAC;GACH;;EAED,aAAa,GAAG;IACd,IAAI,CAAC,OAAO,GAAG,KAAI;IACnB,IAAI,CAAC,MAAM,GAAG,MAAK;GACpB;;EAED,QAAQ,EAAE;IACR,QAAQ,GAAG;MACT,IAAI,KAAI;MACR,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAC1C,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,EAAC;QACpB,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;UACnD,OAAO,KAAK;SACb;OACF;MACD,OAAO,IAAI;KACZ;;IAED,SAAS,GAAG;MACV,OAAO,EAAE;KACV;GACF;;;EAGD,KAAK,EAAE;IACL,MAAM,CAAC,MAAM,EAAE;MACb,IAAI,CAAC,WAAW,CAAC,MAAM,EAAC;KACzB;;IAED,UAAU,GAAG;MACX,IAAI,IAAI,CAAC,OAAO,EAAE;QAChB,IAAI,CAAC,OAAO,CAAC,YAAY,GAAE;OAC5B;KACF;;IAED,IAAI,CAAC,KAAK,EAAE;MACV,IAAI,CAAC,SAAS,CAAC,KAAK,EAAC;KACtB;;IAED,KAAK,CAAC,KAAK,EAAE;MACX,IAAI,IAAI,CAAC,KAAK,KAAK,KAAK,EAAE;QACxB,MAAM;OACP;MACD,IAAI,CAAC,KAAK,GAAG,MAAK;;MAElB,IAAI,OAAO,GAAG,IAAI,CAAC,KAAI;;;MAGvB,IAAI,CAAC,IAAI,GAAG,GAAE;MACd,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAC1C,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,EAAC;QACxB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,KAAI;OAC1B;;;MAGD,KAAK,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE;QACzB,IAAI,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,EAAC;QAC5B,IAAI,OAAO,GAAG,OAAO,CAAC,GAAG,EAAC;QAC1B,IAAI,OAAO,KAAK,OAAO,EAAE;UACvB,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,OAAO,EAAC;SAChC;OACF;;;MAGD,KAAK,IAAI,GAAG,IAAI,OAAO,EAAE;QACvB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;UACnB,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,OAAO,CAAC,GAAG,CAAC,EAAC;SACvC;OACF;KACF;GACF;;EAED,OAAO,EAAE;;;IAGP,KAAK,GAAG;MACN,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;QACrB,IAAI,KAAK,GAAG,IAAI,CAAC,MAAK;QACtB,IAAI,CAAC,KAAK,GAAG,GAAE;;QAEf,IAAI,CAAC,IAAI,GAAG,GAAE;;QAEd,IAAI,CAAC,SAAS,GAAE;QAChB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;UACrC,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC,CAAC,EAAC;SACnC;OACF;MACD,OAAO,IAAI;KACZ;;;IAGD,GAAG,CAAC,EAAE,EAAE;MACN,IAAI,CAAC,EAAE,EAAE;QACP,OAAO,KAAK;OACb;;MAED,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE;QAC1B,OAAO,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,KAAK;OACjC;;MAED,OAAO,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,KAAK;KAC9B;;;IAGD,GAAG,CAAC,MAAM,EAAE,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE;MACjC,IAAI,KAAK,GAAG,OAAM;MAClB,IAAI,OAAO,GAAG,KAAK,YAAY,MAAK;;MAEpC,IAAI,CAAC,OAAO,EAAE;QACZ,KAAK,GAAG,CAAC,KAAK,EAAC;OAChB;;MAED,IAAI,QAAQ,GAAG,GAAE;MACjB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACrC,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,EAAC;QACnB,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,IAAI,YAAY,IAAI,EAAE;UAC/C,IAAI,GAAG;YACL,IAAI;YACJ,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,IAAI,EAAE,IAAI,CAAC,kBAAkB,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,IAAI,IAAI,SAAS;YAC5E,IAAI,EAAE,IAAI,CAAC,IAAI;YAChB;SACF;QACD,IAAI,UAAU,GAAG,MAAK;QACtB,IAAI,IAAI,CAAC,UAAU,KAAK,KAAK,EAAE;;SAE9B,MAAM,IAAI,IAAI,CAAC,UAAU,EAAE;UAC1B,UAAU,GAAG,KAAI;SAClB,MAAM,IAAI,OAAO,OAAO,KAAK,WAAW,IAAI,IAAI,CAAC,EAAE,YAAY,OAAO,EAAE;UACvE,UAAU,GAAG,KAAI;SAClB,MAAM,IAAI,OAAO,IAAI,KAAK,WAAW,IAAI,IAAI,CAAC,IAAI,YAAY,IAAI,EAAE;UACnE,UAAU,GAAG,KAAI;SAClB;QACD,IAAI,UAAU,EAAE;UACd,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC;YACnB,UAAU,EAAE,IAAI;YAChB,IAAI,EAAE,CAAC,CAAC;YACR,IAAI,EAAE,UAAU;YAChB,IAAI,EAAE,EAAE;YACR,MAAM,EAAE,KAAK;YACb,KAAK,EAAE,EAAE;YACT,OAAO,EAAE,KAAK;YACd,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,OAAO,EAAE,IAAI,CAAC,OAAO;WACtB,EAAE,IAAI,EAAE;YACP,QAAQ,EAAE,EAAE;;YAEZ,QAAQ,EAAE,MAAM;YAChB,KAAK,EAAE,CAAC;WACT,EAAC;;UAEF,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,GAAG,EAAE,EAAC;;UAEpE,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,GAAG,EAAE,EAAC;SACjF;;QAED,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE;UACZ,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,EAAC;SAC/C;;QAED,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,SAAS,CAAC,EAAE;UACpC,QAAQ;SACT;;QAED,IAAI,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,IAAI,CAAC,OAAO,EAAE;UAC7E,KAAK;SACN;;QAED,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAC;;QAEnB,IAAI,IAAI,CAAC,OAAO,KAAK,CAAC,EAAE;UACtB,KAAK;SACN;OACF;;MAED,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;QACpB,OAAO,KAAK;OACb;;MAED,IAAI,IAAI,CAAC,OAAO,KAAK,CAAC,EAAE;QACtB,IAAI,CAAC,KAAK,GAAE;OACb;;MAED,IAAI,SAAQ;MACZ,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,CAAC,EAAE;QACjC,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAC;OACvC,MAAM,IAAI,KAAK,EAAE;QAChB,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,EAAE,EAAC;QAC9B,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,QAAQ,EAAC;OACpC,MAAM;QACL,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAC;OACvC;;MAED,IAAI,CAAC,KAAK,GAAG,SAAQ;;MAErB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACxC,IAAI,IAAI,GAAG,QAAQ,CAAC,CAAC,EAAC;QACtB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,KAAI;OAC1B;;MAED,IAAI,CAAC,SAAS,GAAE;MAChB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACxC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,SAAS,EAAC;OACtC;;MAED,OAAO,OAAO,GAAG,QAAQ,GAAG,QAAQ,CAAC,CAAC,CAAC;KACxC;;;IAGD,YAAY,CAAC,EAAE,EAAE;MACf,IAAI,KAAK,GAAG,GAAE;MACd,IAAI,EAAE,CAAC,KAAK,EAAE;QACZ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;UACxC,IAAI,IAAI,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,EAAC;UACtB,KAAK,CAAC,IAAI,CAAC;YACT,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,IAAI,EAAE,IAAI,CAAC,kBAAkB,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,IAAI;YAC/D,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,IAAI;YACJ,EAAE;WACH,EAAC;SACH;OACF,MAAM;QACL,KAAK,CAAC,IAAI,CAAC;UACT,IAAI,EAAE,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,qBAAqB,EAAE,IAAI,CAAC;UACnD,EAAE;SACH,EAAC;OACH;MACD,OAAO,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC;KACvB;;;IAGD,eAAe,CAAC,YAAY,EAAE;MAC5B,IAAI,KAAK,GAAG,GAAE;MACd,IAAI,YAAY,CAAC,KAAK,IAAI,YAAY,CAAC,KAAK,CAAC,MAAM,EAAE;QACnD,IAAI,KAAK,GAAG,GAAE;QACd,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;UAClD,IAAI,IAAI,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC,EAAC;UAChC,IAAI,IAAI,CAAC,UAAU,EAAE;YACnB,IAAI,GAAG,IAAI,CAAC,UAAU,EAAE,IAAI,IAAI,CAAC,SAAS,GAAE;WAC7C,MAAM,IAAI,IAAI,CAAC,gBAAgB,EAAE;YAChC,IAAI,GAAG,IAAI,CAAC,gBAAgB,EAAE,IAAI,IAAI,CAAC,SAAS,GAAE;WACnD,MAAM;YACL,IAAI,GAAG,IAAI,CAAC,SAAS,GAAE;WACxB;UACD,IAAI,IAAI,EAAE;YACR,KAAK,CAAC,IAAI,CAAC,IAAI,EAAC;WACjB;SACF;;QAED,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAK;UACtC,IAAI,OAAO,GAAG,CAAC,CAAC,KAAK;YACnB,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,EAAC;YACnB,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,CAAC,EAAE;cAC/D,OAAO,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;aAChC;YACD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAU,OAAO,EAAE;cAC1C,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,OAAO,EAAC;cAChC,OAAO,CAAC,CAAC,GAAG,CAAC,EAAC;aACf,EAAC;YACH;UACD,OAAO,CAAC,CAAC,EAAC;SACX,CAAC;OACH;;MAED,IAAI,YAAY,CAAC,KAAK,CAAC,MAAM,EAAE;QAC7B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;UAClD,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,EAAC;UACjC,IAAI,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,EAAE;YACpD,KAAK;WACN;SACF;QACD,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;OACxC;;MAED,OAAO,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC;KAC3B;;IAED,QAAQ,CAAC,KAAK,EAAE,IAAI,GAAG,EAAE,EAAE;MACzB,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAK;QACtC,IAAI,KAAK,CAAC,MAAM,EAAE;UAChB,KAAK,CAAC,IAAI,CAAC,UAAU,IAAI,EAAE;YACzB,OAAO,CAAC;cACN;gBACE,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,IAAI;gBACtB,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,IAAI;eACL;aACF,EAAC;WACH,EAAC;SACH,MAAM,IAAI,KAAK,CAAC,WAAW,IAAI,IAAI,CAAC,aAAa,EAAE;UAClD,IAAI,KAAK,GAAG,GAAE;UACd,IAAI,SAAS,GAAG,KAAK,CAAC,YAAY,GAAE;UACpC,IAAI,WAAW,GAAG,MAAM;YACtB,SAAS,CAAC,WAAW,CAAC,CAAC,OAAO,KAAK;cACjC,IAAI,OAAO,GAAG,CAAC,CAAC,KAAK;gBACnB,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,OAAO,GAAG,CAAC,IAAI,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,CAAC,EAAE;kBAClF,OAAO,OAAO,CAAC,KAAK,CAAC;iBACtB;gBACD,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;kBACf,OAAO,WAAW,EAAE;iBACrB;gBACD,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,IAAI,GAAG,KAAK,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,KAAK;kBACnE,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,OAAO,EAAC;kBAChC,OAAO,CAAC,CAAC,GAAG,CAAC,EAAC;iBACf,EAAC;gBACH;cACD,OAAO,CAAC,CAAC,EAAC;aACX,EAAC;YACH;UACD,WAAW,GAAE;SACd,MAAM;UACL,OAAO,CAAC,EAAE,EAAC;SACZ;OACF,CAAC;KACH;;;IAGD,MAAM,CAAC,EAAE,EAAE;MACT,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAC;MACvB,IAAI,IAAI,EAAE;QACR,IAAI,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,IAAI,CAAC,EAAE;UACpC,OAAO,KAAK;SACb;QACD,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,EAAC;QACjC,IAAI,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,EAAC;QAC/B,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;UAChB,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAC;UAC7B,OAAO,KAAK;SACb;QACD,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAC;QACtB,IAAI,CAAC,KAAK,GAAG,MAAK;;QAElB,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAC;;QAEzB,IAAI,CAAC,SAAS,GAAE;QAChB,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,IAAI,EAAC;OAC/B;MACD,OAAO,IAAI;KACZ;;;IAGD,MAAM,CAAC,EAAE,EAAE,IAAI,EAAE;MACf,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAC;MACvB,IAAI,IAAI,EAAE;QACR,IAAI,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,EAAE,IAAI,EAAC;QAC3C,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE;UAC3F,OAAO,CAAC,KAAK,GAAG,QAAO;SACxB;;QAED,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,IAAI,CAAC,EAAE;UAClC,OAAO,KAAK;SACb;;QAED,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,EAAC;QACjC,IAAI,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,EAAC;QAC/B,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;UAChB,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAC;UAC7B,OAAO,KAAK;SACb;QACD,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,OAAO,EAAC;QAC/B,IAAI,CAAC,KAAK,GAAG,MAAK;;QAElB,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAC;QACzB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,GAAG,QAAO;;QAE/B,IAAI,CAAC,SAAS,GAAE;QAChB,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,IAAI,EAAC;QAC5B,OAAO,OAAO;OACf;MACD,OAAO,KAAK;KACb;;IAED,UAAU,CAAC,OAAO,EAAE,OAAO,EAAE;MAC3B,IAAI,SAAS,GAAG,MAAK;MACrB,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,OAAO,EAAE,OAAO,EAAE,YAAY;QACvD,SAAS,GAAG,KAAI;QAChB,OAAO,SAAS;OACjB,EAAC;MACF,OAAO,SAAS;KACjB;;IAED,QAAQ,CAAC,OAAO,EAAE,OAAO,EAAE;MACzB,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,OAAO,EAAE,OAAO,EAAC;MAC1C,IAAI,OAAO,IAAI,OAAO,CAAC,UAAU,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;QACpF,IAAI,CAAC,SAAS,GAAE;QAChB,IAAI,CAAC,SAAS,CAAC,YAAY;UACzB,UAAU,CAAC,MAAM;YACf,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,MAAM;cAC9B,IAAI,OAAO,IAAI,OAAO,CAAC,UAAU,EAAE;gBACjC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE;kBACnB,MAAM,EAAE,KAAK;kBACb,OAAO,EAAE,CAAC,OAAO,CAAC,KAAK;iBACxB,EAAC;eACH;aACF,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK;cACd,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE;gBACnB,MAAM,EAAE,KAAK;gBACb,OAAO,EAAE,KAAK;gBACd,KAAK,EAAE,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,OAAO,IAAI,CAAC;eAC3C,EAAC;aACH,EAAC;WACH,EAAE,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,EAAC;SAC1C,EAAC;OACH,MAAM,IAAI,CAAC,CAAC,OAAO,IAAI,CAAC,OAAO,CAAC,UAAU,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,OAAO,IAAI,OAAO,CAAC,UAAU,IAAI,OAAO,CAAC,MAAM,EAAE;QAClH,IAAI,CAAC,SAAS,GAAE;OACjB;;MAED,IAAI,IAAI,CAAC,MAAM,KAAK,OAAO,CAAC,OAAO,CAAC,KAAK,OAAO,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,MAAM,KAAK,OAAO,CAAC,MAAM,CAAC,EAAE;QAC/F,IAAI,CAAC,WAAW,CAAC,IAAI,EAAC;OACvB;KACF;;IAED,SAAS,GAAG;MACV,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,EAAC;KAChC;;;;IAID,MAAM,CAAC,EAAE,EAAE;MACT,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAC;;;MAGvB,IAAI,CAAC,IAAI,EAAE;QACT,OAAO,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC;OACpC;;;MAGD,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;QACpB,OAAO,OAAO,CAAC,MAAM,CAAC,aAAa,CAAC;OACrC;;;MAGD,IAAI,IAAI,CAAC,KAAK,EAAE;QACd,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;OAClC;;;MAGD,IAAI,IAAI,CAAC,OAAO,EAAE;QAChB,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC;OAC7B;;;MAGD,IAAI,UAAU,GAAG,IAAI,CAAC,WAAU;MAChC,IAAI,UAAU,KAAK,UAAU,CAAC,MAAM,IAAI,OAAO,UAAU,CAAC,MAAM,KAAK,WAAW,CAAC,EAAE;QACjF,IAAI,OAAO,UAAU,KAAK,QAAQ,IAAI,EAAE,UAAU,YAAY,MAAM,CAAC,EAAE;UACrE,IAAI,OAAO,UAAU,KAAK,QAAQ,EAAE;YAClC,UAAU,GAAG,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,IAAI,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,IAAI,KAAK,EAAC;WACrF;UACD,UAAU,GAAG,IAAI,MAAM,CAAC,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC,GAAG,IAAI,EAAE,GAAG,EAAC;SACzF;QACD,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE;UACvC,OAAO,OAAO,CAAC,MAAM,CAAC,WAAW,CAAC;SACnC;OACF;;;MAGD,IAAI,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,EAAE;QAC5D,OAAO,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC;OAC9B;;;MAGD,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE;QACvB,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;OAC9B;MACD,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;KAC9B;;IAED,WAAW,CAAC,IAAI,EAAE;MAChB,IAAI,IAAI,GAAG,IAAI,MAAM,CAAC,QAAQ,GAAE;MAChC,IAAI,MAAK;MACT,KAAK,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE;QACzB,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,EAAC;QACtB,IAAI,KAAK,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,OAAO,KAAK,CAAC,QAAQ,KAAK,UAAU,EAAE;UAC9E,IAAI,KAAK,YAAY,IAAI,EAAE;YACzB,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,KAAK,EAAE,KAAK,CAAC,IAAI,EAAC;WACpC,MAAM;YACL,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,EAAC;WACxC;SACF,MAAM,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS,EAAE;UAChD,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,KAAK,EAAC;SACxB;OACF;MACD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI,EAAC;MAClE,IAAI,GAAG,GAAG,IAAI,cAAc,GAAE;MAC9B,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,EAAC;MACjC,OAAO,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC;KACvC;;;IAGD,SAAS,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,EAAE;MAC1B,IAAI,IAAI,GAAG,MAAK;MAChB,IAAI,SAAS,GAAG,EAAC;MACjB,IAAI,WAAW,GAAG,EAAC;;MAEnB,GAAG,CAAC,MAAM,CAAC,UAAU,GAAG,CAAC,CAAC,KAAK;QAC7B,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAC;QACrB,IAAI,CAAC,CAAC,CAAC,gBAAgB,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;UACpE,MAAM;SACP;;QAED,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,EAAC;QAC9C,IAAI,UAAU,KAAK,SAAS,EAAE;UAC5B,MAAM;SACP;QACD,SAAS,GAAG,WAAU;;QAEtB,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE;UACvB,QAAQ,EAAE,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,GAAG,EAAE,OAAO,CAAC,CAAC,CAAC;UAC/C,KAAK,EAAE,CAAC,CAAC,MAAM,GAAG,WAAW;SAC9B,EAAC;QACF,WAAW,GAAG,CAAC,CAAC,OAAM;QACvB;;MAED,IAAI,QAAQ,GAAG,WAAW,CAAC,MAAM;QAC/B,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAC;QACrB,IAAI,IAAI,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,MAAM,EAAE;UAC1E,MAAM;SACP;;QAED,IAAI,QAAQ,EAAE;UACZ,aAAa,CAAC,QAAQ,EAAC;UACvB,QAAQ,GAAG,MAAK;SACjB;;QAED,IAAI;UACF,GAAG,CAAC,KAAK,GAAE;UACX,GAAG,CAAC,OAAO,GAAG,EAAC;SAChB,CAAC,OAAO,CAAC,EAAE;SACX;OACF,EAAE,GAAG,EAAC;;MAEP,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAK;QACtC,IAAI,SAAQ;QACZ,IAAI,EAAE,GAAG,CAAC,CAAC,KAAK;UACd,IAAI,QAAQ,EAAE;YACZ,MAAM;WACP;UACD,QAAQ,GAAG,KAAI;UACf,IAAI,QAAQ,EAAE;YACZ,aAAa,CAAC,QAAQ,EAAC;YACvB,QAAQ,GAAG,MAAK;WACjB;;UAED,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAC;;UAErB,IAAI,CAAC,IAAI,EAAE;YACT,OAAO,MAAM,CAAC,YAAY,CAAC;WAC5B;;UAED,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,OAAO,MAAM,CAAC,aAAa,CAAC;WAC7B;;UAED,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;WAC1B;;UAED,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YAChB,OAAO,MAAM,CAAC,OAAO,CAAC;WACvB;;;UAGD,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,OAAO,OAAO,CAAC,IAAI,CAAC;WACrB;;UAED,IAAI,IAAI,GAAG,GAAE;;UAEb,QAAQ,CAAC,CAAC,IAAI;YACZ,KAAK,SAAS,CAAC;YACf,KAAK,OAAO;cACV,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,KAAI;cACnB,KAAK;YACP,KAAK,OAAO;cACV,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE;gBACf,IAAI,CAAC,KAAK,GAAG,UAAS;eACvB,MAAM,IAAI,GAAG,CAAC,MAAM,IAAI,GAAG,EAAE;gBAC5B,IAAI,CAAC,KAAK,GAAG,SAAQ;eACtB,MAAM,IAAI,GAAG,CAAC,MAAM,IAAI,GAAG,EAAE;gBAC5B,IAAI,CAAC,KAAK,GAAG,SAAQ;eACtB;cACD,KAAK;YACP;cACE,IAAI,GAAG,CAAC,MAAM,IAAI,GAAG,EAAE;gBACrB,IAAI,CAAC,KAAK,GAAG,SAAQ;eACtB,MAAM,IAAI,GAAG,CAAC,MAAM,IAAI,GAAG,EAAE;gBAC5B,IAAI,CAAC,KAAK,GAAG,SAAQ;eACtB,MAAM;gBACL,IAAI,CAAC,QAAQ,GAAG,SAAQ;eACzB;WACJ;;UAED,IAAI,GAAG,CAAC,YAAY,EAAE;YACpB,IAAI,WAAW,GAAG,GAAG,CAAC,iBAAiB,CAAC,cAAc,EAAC;YACvD,IAAI,WAAW,IAAI,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE;cACtD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,EAAC;aAC7C,MAAM;cACL,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,aAAY;aACjC;WACF;;UAED,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,EAAC;;UAE9B,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;WAC1B;;UAED,OAAO,OAAO,CAAC,IAAI,CAAC;UACrB;;QAED,GAAG,CAAC,MAAM,GAAG,GAAE;QACf,GAAG,CAAC,OAAO,GAAG,GAAE;QAChB,GAAG,CAAC,OAAO,GAAG,GAAE;QAChB,GAAG,CAAC,SAAS,GAAG,GAAE;;QAElB,IAAI,IAAI,CAAC,OAAO,EAAE;UAChB,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC,QAAO;SAC3B;;;QAGD,KAAK,IAAI,GAAG,IAAI,IAAI,CAAC,OAAO,EAAE;UAC5B,GAAG,CAAC,gBAAgB,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAC;SAC7C;;QAED,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,GAAG,EAAE,EAAC;;QAEjC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAC;OACf,CAAC;KACH;;IAED,WAAW,CAAC,KAAK,EAAE;MACjB,IAAI,IAAI,GAAG,MAAK;MAChB,IAAI,SAAS,GAAG,UAAU,CAAC,EAAE;QAC3B,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE,EAAE;UACpB,CAAC,CAAC,cAAc,GAAE;SACnB;QACF;;MAED,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,EAAC;MAC7C,MAAM,CAAC,EAAE,GAAG,gBAAgB,GAAG,IAAI,CAAC,GAAE;MACtC,MAAM,CAAC,IAAI,GAAG,gBAAgB,GAAG,IAAI,CAAC,GAAE;MACxC,MAAM,CAAC,GAAG,GAAG,cAAa;MAC1B,MAAM,CAAC,YAAY,CAAC,OAAO,EAAE,uEAAuE,EAAC;;;MAGrG,IAAI,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,EAAC;;MAEzC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,WAAU;;MAE7B,IAAI,CAAC,IAAI,GAAG,cAAc,GAAG,IAAI,CAAC,GAAE;;;MAGpC,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,MAAM,EAAC;MACnC,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,gBAAgB,GAAG,IAAI,CAAC,EAAE,EAAC;MACvD,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE,qBAAqB,EAAC;;MAEnD,IAAI,MAAK;MACT,IAAI,MAAK;MACT,KAAK,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE;QACzB,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,EAAC;QACtB,IAAI,KAAK,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,OAAO,KAAK,CAAC,QAAQ,KAAK,UAAU,EAAE;UAC9E,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAC;SAC9B;QACD,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS,EAAE;UACzC,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,EAAC;UACvC,KAAK,CAAC,IAAI,GAAG,SAAQ;UACrB,KAAK,CAAC,IAAI,GAAG,IAAG;UAChB,KAAK,CAAC,KAAK,GAAG,MAAK;UACnB,IAAI,CAAC,WAAW,CAAC,KAAK,EAAC;SACxB;OACF;MACD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,EAAC;;MAEzB,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,IAAI,EAAC;;MAEnD,IAAI,eAAe,GAAG,YAAY;QAChC,IAAI,IAAG;QACP,IAAI;UACF,IAAI,MAAM,CAAC,aAAa,EAAE;YACxB,GAAG,GAAG,MAAM,CAAC,aAAa,CAAC,SAAQ;WACpC;SACF,CAAC,OAAO,GAAG,EAAE;SACb;QACD,IAAI,CAAC,GAAG,EAAE;UACR,IAAI;YACF,GAAG,GAAG,MAAM,CAAC,eAAe,GAAG,MAAM,CAAC,eAAe,GAAG,MAAM,CAAC,SAAQ;WACxE,CAAC,OAAO,GAAG,EAAE;YACZ,GAAG,GAAG,MAAM,CAAC,SAAQ;WACtB;SACF;QACD,IAAI,GAAG,IAAI,GAAG,CAAC,IAAI,EAAE;UACnB,OAAO,GAAG,CAAC,IAAI,CAAC,SAAS;SAC1B;QACD,OAAO,IAAI;QACZ;;MAED,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAK;QACtC,UAAU,CAAC,MAAM;UACf,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,MAAM,EAAE,EAAC;;;UAGpC,IAAI,CAAC,IAAI,EAAE;YACT,OAAO,MAAM,CAAC,YAAY,CAAC;WAC5B;;UAED,IAAI,QAAQ,GAAG,WAAW,CAAC,MAAM;YAC/B,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAC;YACrB,IAAI,IAAI,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,MAAM,EAAE;cAC1E,MAAM;aACP;;YAED,IAAI,QAAQ,EAAE;cACZ,aAAa,CAAC,QAAQ,EAAC;cACvB,QAAQ,GAAG,MAAK;aACjB;;YAED,MAAM,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,IAAI,GAAG,OAAO,GAAG,YAAY,EAAE,EAAC;WACxD,EAAE,GAAG,EAAC;;;UAGP,IAAI,SAAQ;UACZ,IAAI,EAAE,GAAG,CAAC,CAAC,KAAK;YACd,IAAI,QAAQ,EAAE;cACZ,MAAM;aACP;YACD,QAAQ,GAAG,KAAI;;;YAGf,IAAI,QAAQ,EAAE;cACZ,aAAa,CAAC,QAAQ,EAAC;cACvB,QAAQ,GAAG,MAAK;aACjB;;YAED,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,SAAS,EAAC;;YAEvD,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAC;;YAErB,IAAI,CAAC,IAAI,EAAE;cACT,OAAO,MAAM,CAAC,YAAY,CAAC;aAC5B;;YAED,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;cACpB,OAAO,MAAM,CAAC,aAAa,CAAC;aAC7B;;YAED,IAAI,IAAI,CAAC,KAAK,EAAE;cACd,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;aAC1B;;YAED,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;cAChB,OAAO,MAAM,CAAC,OAAO,CAAC;aACvB;;YAED,IAAI,IAAI,CAAC,OAAO,EAAE;cAChB,OAAO,OAAO,CAAC,IAAI,CAAC;aACrB;;YAED,IAAI,QAAQ,GAAG,eAAe,GAAE;YAChC,IAAI,IAAI,GAAG,GAAE;YACb,QAAQ,CAAC,CAAC,IAAI;cACZ,KAAK,OAAO;gBACV,IAAI,CAAC,KAAK,GAAG,QAAO;gBACpB,KAAK;cACP,KAAK,OAAO;gBACV,IAAI,IAAI,CAAC,KAAK,EAAE;kBACd,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAK;iBACxB,MAAM,IAAI,QAAQ,KAAK,IAAI,EAAE;kBAC5B,IAAI,CAAC,KAAK,GAAG,UAAS;iBACvB,MAAM;kBACL,IAAI,CAAC,KAAK,GAAG,SAAQ;iBACtB;gBACD,KAAK;cACP;gBACE,IAAI,IAAI,CAAC,KAAK,EAAE;kBACd,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAK;iBACxB,MAAM,IAAI,IAAI,KAAK,IAAI,EAAE;kBACxB,IAAI,CAAC,KAAK,GAAG,UAAS;iBACvB,MAAM;kBACL,IAAI,CAAC,QAAQ,GAAG,SAAQ;iBACzB;aACJ;;YAED,IAAI,QAAQ,KAAK,IAAI,EAAE;cACrB,IAAI,QAAQ,IAAI,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,GAAG,IAAI,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC,KAAK,GAAG,EAAE;gBAChG,IAAI;kBACF,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAC;iBAChC,CAAC,OAAO,GAAG,EAAE;iBACb;eACF;cACD,IAAI,CAAC,QAAQ,GAAG,SAAQ;aACzB;;YAED,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,EAAC;;YAE9B,IAAI,IAAI,CAAC,KAAK,EAAE;cACd,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;aAC1B;;YAED,OAAO,OAAO,CAAC,IAAI,CAAC;YACrB;;UAED,MAAM,CAAC,MAAM,GAAG,GAAE;UAClB,MAAM,CAAC,OAAO,GAAG,GAAE;UACnB,MAAM,CAAC,OAAO,GAAG,GAAE;;UAEnB,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,SAAS,EAAC;;UAEpD,IAAI,CAAC,MAAM,GAAE;SACd,EAAE,EAAE,EAAC;OACP,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,EAAE;QACrB,MAAM,CAAC,UAAU,IAAI,MAAM,CAAC,UAAU,CAAC,WAAW,CAAC,MAAM,EAAC;QAC1D,OAAO,GAAG;OACX,CAAC,CAAC,KAAK,CAAC,UAAU,GAAG,EAAE;QACtB,MAAM,CAAC,UAAU,IAAI,MAAM,CAAC,UAAU,CAAC,WAAW,CAAC,MAAM,EAAC;QAC1D,OAAO,GAAG;OACX,CAAC;KACH;;IAED,WAAW,CAAC,MAAM,EAAE;MAClB,IAAI,KAAI;MACR,IAAI,KAAK,GAAG,EAAC;MACb,QAAQ,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG;QACjC,KAAK,GAAE;QACP,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;;SAErB,MAAM,IAAI,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;UAClC,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,MAAM,KAAK,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;YAC7E,KAAK;WACN;UACD,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YAChD,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,EAAC;WACpC;SACF,MAAM;UACL,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,EAAC;WACrC;SACF;OACF;MACD,IAAI,IAAI,CAAC,SAAS,KAAK,CAAC,EAAE;QACxB,IAAI,CAAC,MAAM,GAAG,MAAK;OACpB;KACF;;IAED,SAAS,CAAC,GAAG,EAAE;MACb,IAAI,EAAE,GAAG,IAAG;MACZ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE;QACvB,MAAM;OACP;;MAED,IAAI,IAAI,CAAC,WAAW,EAAE;QACpB,IAAI;UACF,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,KAAK,EAAC;UAClE,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,KAAK,EAAC;UAClE,QAAQ,CAAC,mBAAmB,CAAC,MAAM,EAAE,IAAI,CAAC,cAAc,EAAE,KAAK,EAAC;UAChE,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE,KAAK,EAAC;UACxE,IAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,EAAC;SACjE,CAAC,OAAO,CAAC,EAAE;SACX;OACF;;MAED,IAAI,CAAC,EAAE,EAAE;QACP,EAAE,GAAG,MAAK;OACX,MAAM,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE;QACjC,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,EAAC;OACpE,MAAM,IAAI,EAAE,KAAK,IAAI,EAAE;QACtB,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,IAAG;OACtB;;MAED,IAAI,CAAC,WAAW,GAAG,GAAE;;MAErB,IAAI,IAAI,CAAC,WAAW,EAAE;QACpB,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,KAAK,EAAC;QAC/D,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,KAAK,EAAC;QAC/D,QAAQ,CAAC,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAAC,cAAc,EAAE,KAAK,EAAC;QAC7D,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE,KAAK,EAAC;QACrE,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,EAAC;OAC9D;KACF;;IAED,WAAW,CAAC,CAAC,EAAE;MACb,CAAC,CAAC,cAAc,GAAE;MAClB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;QACpB,IAAI,CAAC,UAAU,GAAG,KAAI;OACvB;KACF;;IAED,WAAW,CAAC,CAAC,EAAE;MACb,CAAC,CAAC,cAAc,GAAE;MAClB,IAAI,CAAC,CAAC,MAAM,CAAC,QAAQ,KAAK,MAAM,KAAK,CAAC,CAAC,OAAO,KAAK,CAAC,IAAI,CAAC,CAAC,OAAO,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,WAAW,IAAI,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,EAAE;QAC5G,IAAI,CAAC,UAAU,GAAG,MAAK;OACxB;KACF;;IAED,UAAU,CAAC,CAAC,EAAE;MACZ,CAAC,CAAC,cAAc,GAAE;KACnB;;IAED,cAAc,GAAG;MACf,IAAI,CAAC,UAAU,GAAG,MAAK;KACxB;;IAED,MAAM,CAAC,CAAC,EAAE;MACR,CAAC,CAAC,cAAc,GAAE;MAClB,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,YAAY,EAAC;KACrC;GACF;EACF;;;;;;;;;AC9hCD,OAAc,GAAG;;;;;;;;"}